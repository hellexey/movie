# 2.2.9
Movies App - Начало
Внимание! Сервер API заблокирован для некоторых пользователей из России

Если у вас не получается зарегистрироваться, то советуем воспользоваться любым VPN.
Например в google chrome установить бесплатный VPN Zen Mate.
Или воспользуйтесь VPN для всего трафика на компьютере AD Guard (бесплатно 3gb в месяц - этого достаточно для реализации проекта)

Не забудьте отключить VPN как только закончите разработку, чтобы восстановить скорость интернет соединения.

Макеты (Start - базовый, Final - итоговый, мобилку можете сделать в последнюю очередь)

Используя MovieDB API разработайте приложение для поиска фильмов.

Для реализации интерфейса будем пользовать библиотекой готовых компонентов Antd.

Задача будет разбита на этапы, код ревью будет проводится по итоговому приложению.

Первая часть - получить список фильмов с сервера и отобразить их в приложении.

    Сверстайте макет по мокапам. Достаточно списка фильмов - без поиска.
    Зарегистрируйтесь на сервисе, создайте API ключ для вашего приложения (Тип использования выберите "Обучение", поля можно заполнить любыми данными)
    Используя API поиска фильмов получите фильмы по поиску по ключему слову "return" и выведите их на страницу

Примечания:

    Настройте все инструменты по контролю качества кода, как и в предыдущей проекте (eslint/prettier/husky/lint-staged). Для всех последующих проектов этот шаг требуется по-умолчанию.
    Для форматирования времени пользуйтесь date-fns
    Напишите отдельную функцию для сокращения текста описания, сокращенный текст не должен обрезать слова на середине.
    На жанры пока сделайте "заглушки" - отобразим настоящие данные из апи позже

Результат должен быть запушин в репозиторий гитхаб. Ссылку на репозиторий с кодом всех выполненных заданий отправите в конце модуля, в специальное поле, после выполнения финального задания по данному проекту

```markdown
Комментарии учеников (12)
user avatar
Владимир Павленко
17.01.2022 15:33
Для добавления картинок используйте эту ссылку - https://image.tmdb.org/t/p/w500
В конец url нужно добавлять poster_path, который вы получаете из api
15
user avatar
Андрей Салынин
20.06.2022 00:49
адрес для картинок поменялся https://image.tmdb.org/t/p/original
9
user avatar
Константин Кабанов
03.02.2023 19:05
Видать у меня у одного сгорела ЖОПА с ****** date-fns, но тем не менее, исключительным рандомом смог добиться нужного результата! 

Ребята для преобразования даты в нужный формат, берем и пишем format(new Date(yourDate), 'MMMM dd, yyyy', { locale: enGB })

P.S. может кто-то смог по другому, шикарно, поделитесь как, ибо документация у date-fns полный кааааал. 
6
user avatar
Андрей Гулиянц
18.01.2023 17:23
Antd: https://youtu.be/LfKgQ5mAcRs
3
user avatar
Анатолий Швецов
22.10.2022 17:44
ссылка на тутор по муви дб https://www.youtube.com/watch?v=FlFyrOEz2S4
3
user avatar
Никита Логунёнок
07.10.2022 03:53
В макете выводится 6 карточек, а в апишке используйте этот эндпоинт https://developers.themoviedb.org/3/search/search-movies, в нем далее вы будете указывать квери параметр page для пагинации. Так вот, в макете 6 карточек, апишка присылает данные для 20 карточек, и это изменить никак нельзя. Если вы захотите делать по 6 карточек, и у вас будет например активная 3 страница, то вам нужно будет вытащить 2 карточки с текущего запроса и 4 со следующего, а это капец какая костыльная штука, потому что вся пагинация делается на сервере. Поэтому важно - скажите об этом ментору и попросите, чтоб выводить именно 20 карточек. Многие менторы одобряют этот вариант, а мой ментор делал как раз эту функцию для вывода 6 карточек и ему его ментор сказал, что он мог не париться и сделать по 20. Надеюсь помог) 
3Ответы (1)
user avatar
Павел Герман
13.06.2023 22:22
блокируют по DNS по этому VPN не нужен. Поменяйте на 9.9.9.9, например и все заработает
1
user avatar
Павел Порывай
10.05.2023 06:04
MovieDB API заблокировали на уровне DNS, поэтому не удивляйтесь, что даже с включенным VPN сюда https://developer.themoviedb.org/docs может не зайти, а также при загруpке данных выдает ошибку "failed to fetch"
Решение:
                 https://bafista.ru/the-movie-database-tmdb-zablokirovali-est-prostoe-reshenie/
                 https://remontka.pro/change-dns-server-windows/
                 (просто меняем предпочтительный и альтернативный адреса DNS)
1
user avatar
Артём Вершинин
14.04.2023 11:50
Помимо условно-бесплатного UrbanVPN, можно использовать Windscribe (за указание мыла дадут 10 гигов в месяц).
Еще есть Proton VPN (тоже условно-бесплатный).
1
user avatar
Иван Баяндин
14.04.2023 02:37
Лично мне помог декстопный UrbanVPN.

1
user avatar
Сергей Пашков
18.02.2023 15:52
Из VPN рекомендую программу Psiphon Pro - бесплатная высокая скорость и без ограничений по трафику. Ставим лайки, подписываемся, ждем новый контент   
1
user avatar
Эдуард Шабронский
10.04.2023 19:48
Vite | Next Generation Frontend Tooling (vitejs.dev) более современный инструмент для создания подобных приложений, и вообще приложений на React
```

# 2.2.10 - 2.2.14
Урок 58 - 61

# 2.2.14

Movies App - Лоадер и обработка ошибок

Итоговый макет

Используя MovieDB API разработайте приложение для поиска фильмов.

В качестве библиотекой компонентов используем Antd.

Давайте доработаем наше приложение.

    Добавить индикатор загрузки - возьмите из библиотеки Antd компонент Spin.
    Реализуйте обработку ошибок - возьмите компонент Alert
    Реализуйте обработку ситуации, когда у пользователя нет сети (вы можете эмулировать это в chrome dev tools).

Результат должен быть запушин в репозиторий гитхаб. Ссылку на репозиторий с кодом всех выполненных заданий отправите в конце модуля, в специальное поле, после выполнения финального задания по данному проекту

```markdown
Комментарии учеников (5)
user avatar
Никита Логунёнок
05.10.2022 20:45
Для тех, кто не понимает, как реализовать проверку на отсутствие интернета - вот вам библиотека, которая поможет решить эту проблему :) https://www.npmjs.com/package/react-detect-offline

10
user avatar
Александр Игуминов
07.02.2023 19:47
Спасибо за библиотеку "react-detect-offline"... 
Документация всего: 
1) <Online>{редериться, когда есть интренет}</Online>  
2)<Offline>{редериться, когда НЕТ интренета}</Offline>
6
user avatar
Никита Логунёнок
07.10.2022 17:10
Еще один человек из слака предложил следующий вариант обработки отсутствия сети. 
"Я делал при помощи событий window.ononline и onoffline:1) Создаёшь компонент NetworkStatefunction NetworkState({ onNetworkState }) {
  window.onoffline = () => {
    onNetworkState();
  };
  window.ononline = () => {
    onNetworkState();
  };
}export default NetworkState;2) в компоненте app.js Создаёшь функцию, которая меняет в стейте наличие интернета с true на false.onNetworkState = () => {
    this.setState((prevState) => ({ network: !prevState.network }));
  };3) и рендеришь компонент NetworkState, передав ему эту функцию:<NetworkState onNetworkState={this.onNetworkState} />"

далее написал следующее:

"Ну и финальным шагом, если отсутствие интернета  == true, рендеришь Alert из библиотеки antd с текстом об отсутствии подключения.{network ? (
          <Alert
            className="alert alert-net"
            message={constants.messageFailNet}
          />
        ) : null}"

Мне этот метод показался не очень красивым, но для общего развития знать, что есть  window.onoffline и window.ononline думаю полезно)
1Ответы (3)
user avatar
Даниил Бобров
05.06.2023 20:55
react-detect-offline так себе работает постоянно скидывает подключение, лучше делать get запрос к гуглу и плясать от небольшой тернарки)) с гуглом уж точно все ок будет не закроеться 
0
user avatar
Олег Грициенко
01.10.2022 15:35
Легче было сначала сделать всю логику, а потом отлавливать ошибки. Всем успехов!)
```
# 2.3.1 - 2.3.6
Урок 62 - 68

# 2.3.7

Movies App - Поиск и пагинация

Итоговый макет

Используя MovieDB API и Antd разработайте приложение для поиска фильмов.

Добавим функционал поиска и пагинации. Пагинация - это постраничный вывод информации в веб страницах.

    Добавить текстовое поле ввода, по изменению которого будет выполняться поиск
    Сделать серверную пагинацию (при переключении страниц должны отправляться новые запросы) с применением компонента Pagination.

Требования к поиску:

    Поиск должен происходить сразу после того, как пользователь ввел поисковый запрос (без нажатия на кнопку)
    При вводе символов в поле ввода запросы не должны отправляться сразу в целях избежания лишних запросов на сервер. Дождитесь, пока пользователь допечатает. Используйте для этого функцию debounce из lodash
    Если поиск не дал результатов, должно отображаться сообщение об этом
    Пока фильмы загружаются, должен отображаться спиннер загрузки
    Результаты поиска должны быть разделены постранично (используйте antd pagination). Постраничное деление данных (pagination) реализовывается на сервере, вам лишь нужно отобразить интерфейс для его использования. Найдите необходимое API для этого и воспользуйтесь им.

Результат должен быть запушин в репозиторий гитхаб. Ссылку на репозиторий с кодом всех выполненных заданий отправите в конце модуля, в специальное поле, после выполнения финального задания по данному проекту

# 2.3.9
Практическая задача
TODO App с таймером

Вернемся к нашему приложению TODO и немного его доработаем. Нам нужно будет добавить инструмент для учета времени, потраченного на задачу. Мы будем запускать таймер, когда занимаемся задачей и останавливать по завершению или в перерывах.

Ссылка на репозиторий верстки
https://github.com/jm-program/todo-template/tree/task_timer

Возьмем доработанные стили из гит-ветки task_timer.

Вам нужно добавить каждому заданию таймер, который мы можем запустить и остановить. При запуске таймер начинает отсчитывать время и обновляться каждую секунду. По остановке отсчет останавливается и его можно возобновить при нажатии на старт.

Таймер должен корректно работать при смене вкладок браузера.

Сделайте новую ветку от уже существующего приложения TODO для выполнения этого задания. Результат должен быть в виде ссылки на работающее приложение.

P.S. Есть готовые сервисы с похожим функционалом, например Toggl.

```markdown
Комментарии учеников (6)
user avatar
Никита Логунёнок
12.10.2022 03:56
Перед тем как приступить к заданию, создайте сразу новую ветку (git checkout -b branchName) и работайте в ней. Если вы будете работать в той же ветке, то когда вы будете вставлять сюда ссылку, платформа не даст вам вставить ссылку на ту же ветку, с которой вы работали до этого задания
10
user avatar
Артём Вершинин
05.04.2023 20:57
Кучу времени потратил, чтобы разобраться, почему не создается новая таска... Хотя в коде было все правильно. Ну почти: не хватало <button type="submit"> в форме, чтобы по нажатию на Enter все работало.  
5Ответы (1)
user avatar
Никита Логунёнок
12.10.2022 03:51
одна из правок - "Сделать валидацию формы, что бы таски добавлялись только с корректными значениями таймера"
2
user avatar
Владимира Резвякова
18.01.2023 23:44
Спалили прогу (Toggl), которой я пользовалась все это время, чтобы отслеживать, сколько часов в день трачу на обучение.  
1
user avatar
Вадим Хрыканов
22.12.2022 23:08
Изменения в стилях и в вёрстке удобно посмотреть через гит
1
user avatar
Павел Казанцев
10.06.2022 20:03
onKeyDown ={()=>{this.fn}}
0Ответы (1)
user avatar
Анатолий Швецов
02.11.2022 17:58
мне запретили делать так, хоть нигде не сказано делайте через скрытую кнопку сабмит
```

# 2.3.10 - 2.3.13
урок 69, 70, 82, 83

# 2.3.14
Movies App - Рейтинг и жанры

Итоговый макет

Используя MovieDB API и Antd разработайте приложение для поиска фильмов.

Добавим функционал добавления в избранное и отображение жанров.

    При запуске вашего приложения создаем новую гостевую сессию по апи
    Разделяем приложение на 2 таба - Search и Rated, в табе Rated выводим только список тех фильмов, которы оценивали (см апи) без строки поиска - в остальном макет идетичен.
    Добавляем звезды для голосования (компонент Rate). Если вы не голосовали за фильм - все звезды должны быть пустыми, если голосовали - тот рейтинг, что вы проставили фильму.
    Добавить блок с текущим рейтингом в правом-верхнем углу блока, сделать изменение цвета круга в зависимости от рейтинга (см ниже).
    При старте приложения получать список жанров, хранить данные с помощью React.Context, отображать по соотвествующим ID в списке жанров карточки.

Цвета в зависимости от оценки:

    От 0 до 3 - #E90000
    От 3 до 5 - #E97E00
    От 5 до 7 - #E9D100
    Выше 7 - #66E900

Результат должен быть запушин в репозиторий гитхаб. Ссылку на репозиторий с кодом всех выполненных заданий отправите в конце модуля, в специальное поле, после выполнения финального задания по данному проекту

```markdown
Комментарии учеников (6)
user avatar
Никита Логунёнок
12.10.2022 04:22
надеюсь, что хоть кому-то мои комментарии помогают, и писал их не зря...
35Ответы (3)
user avatar
Никита Логунёнок
12.10.2022 04:21
Есть такой момент. Компонент Tabs маунтит содержимое только тогда при первом активном состоянии, потом он все это дело как-то кеширует и не маунтит повторно. Проблема была в том, что при проставлении  звездочек на одной странице, они не проставлялись на другой, хотя оба были привязаны к единому стейту и в обоих табах нажатие на звездочки меняло это общий стейт, следовательно должны были быть перерисовки, но их не было! Так вот пытался это поведение обойти 2 дня, как-то закостылить, в итоге нагуглил решение, помогло свойство destroyInactiveTabPane для Tabs. Как-то это не было супер очевидным, что такое свойство может быть в документации
15
user avatar
Никита Логунёнок
09.10.2022 21:01
жанры можно получить из этого эндпоинта https://developers.themoviedb.org/3/genres/get-movie-list
13
user avatar
Дмитрий Глушко
05.12.2021 22:48
Мои одногруппники вместо возни с гостевой сессией использовали localStorage. Им и менторы так говорили. Жаль я сам не додумался и угробил часы на это. localStorage использовать и проще, и он сам куда полезнее, так как оценённые фильмы никуда не пропадут после закрытия вкладки. Думаю, вы можете для себя попробовать по минимуму что-то сделать для гостевой сессии и просто понаписать консолей и проверить, что всё правильно работает. У меня лично после какого-то бага работало очень нестабильно. К тому же по гостевой сессии нельзя сохранить оценённые фильмы, если эти фильмы ещё не вышли в кино.
13Ответы (1)
user avatar
Никита Логунёнок
10.10.2022 07:43
Тут пост запрос на то, чтобы проставить рейтинг фильму через гостевую сессию https://developers.themoviedb.org/3/movies/rate-movie
а тут гет запрос на получение оцененных фильмов по гостевой сессии https://developers.themoviedb.org/3/guest-sessions/get-guest-session-rated-movies
10Ответы (3)
user avatar
Никита Логунёнок
10.10.2022 18:13
а вот создание (auth) гостевой сессии https://developers.themoviedb.org/3/authentication/create-guest-session
4
user avatar
Никита Логунёнок
10.10.2022 07:54
Единственное, что эндпоинт /searcth/movie не возвращает нам нашу проставленную оценку, поэтому придется её хранить в локалсторадже: key - fimID, vale - rate
1
user avatar
Никита Логунёнок
27.12.2022 01:42
Поправка к коментарию "Единственное, что эндпоинт /searcth/movie не возвращает нам нашу проставленную оценку, поэтому придется её хранить в локалсторадже: key - fimID, vale - rate"

Изначально я так и сделал, я видел такую реализацию и у других ребят, но в итоге ментор сказал, что локалсторадж не база данных и пришлось соединять данные из 2х разных запросов.
0
user avatar
Дмитрий Андрюшин
25.01.2023 20:30
Те кто делает на гостевой сессии. Для пагинации нужно делать запрос на получение определенной страницы.
В документации к API не нписано что GET /guest_session/{guest_session_id}/rated/movies принимает page,но в действительности в строке запроса он есть &page={value}
```

# 2.3.15
https://ru.legacy.reactjs.org/docs/refs-and-the-dom.html
https://www.youtube.com/watch?v=lc4M02c673Y


# 2.3.16
https://www.youtube.com/watch?v=Jw1zocLDnnc
https://ru.legacy.reactjs.org/docs/optimizing-performance.html#shouldcomponentupdate-in-action

# Запись на ревью

Запишись на ревью в удобное для тебя время. Для этого согласуй удобное вам обоим время с ментором, затем ментор сам поставит слот в графике ревью на E.W.P. и внесёт тебя в этот слот.

Ссылку на зум-конференцию с твоим ментором ты найдёшь за несколько минут до ревью в разделе Ревью, а также она придёт тебе в личном сообщении в Слаке.

Перед ревью проверь себя по контрольным вопросам:

    Функции Lifecycle (жизненный цикл компонента и методы)
    React.Context
    Ref
    Работа с таймерами

